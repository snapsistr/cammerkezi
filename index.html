<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Yönetici Paneli | Cam Fiyatları</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; }
        .container { max-width: 500px; margin: 60px auto; background: #fff; padding: 32px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
        h1 { text-align: center; color: #0a4974; }
        label { display: block; margin-bottom: 7px; }
        .cam-row { display: flex; align-items: center; margin-bottom: 8px; }
        .cam-row input[type="text"] { flex: 1; padding: 7px; margin-right: 7px; border: 1px solid #bbb; border-radius: 5px;}
        .cam-row input[type="number"] { width: 100px; padding: 7px; margin-right: 7px; border: 1px solid #bbb; border-radius: 5px;}
        .cam-row button { background: #d9534f; color: #fff; border: none; border-radius: 4px; padding: 7px 10px; cursor: pointer;}
        .cam-row button:hover { background: #b52a24; }
        #ekleBtn { background: #0a4974; color: #fff; padding: 9px 18px; border: none; border-radius: 6px; font-size: 15px; margin-top: 14px; cursor: pointer;}
        #ekleBtn:hover { background: #08365a; }
        .geri-link { text-align: center; margin-top: 30px;}
        .geri-link a { color: #0a4974; text-decoration: underline; }
        .bilgi { background: #ecf6fb; color: #0a4974; padding: 11px; border-radius: 7px; margin-bottom: 22px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cam Fiyatları Ayarları</h1>
        <div class="bilgi">
            Cam tiplerini ekleyebilir, fiyatlarını belirleyebilir veya silebilirsiniz.<br>
            <small>Değişiklikler anında kaydedilir.</small>
        </div>
        <form id="camForm" onsubmit="fiyatlariKaydet(event)">
            <div id="camListesi"></div>
            <button type="button" id="ekleBtn" onclick="camSatiriEkle()">+ Yeni Cam Tipi Ekle</button>
            <button type="submit" style="float:right;">Kaydet</button>
            <div style="clear:both"></div>
        </form>
        <div class="geri-link">
            <a href="index.html">← Kullanıcı Paneline Dön</a>
        </div>
    </div>
    <script>
        function fiyatlariGetir() {
            let fiyatlar = localStorage.getItem('camFiyatlariV2');
            if (fiyatlar) return JSON.parse(fiyatlar);
            return [
                { isim: "Isıcam", fiyat: 900 },
                { isim: "Çiftcam", fiyat: 1150 }
            ];
        }

        function camSatiriEkle(isim = "", fiyat = "") {
            const div = document.createElement('div');
            div.className = "cam-row";
            div.innerHTML = `
                <input type="text" placeholder="Cam Tipi" required value="${isim}">
                <input type="number" placeholder="Fiyat (TL/m²)" min="1" step="0.01" required value="${fiyat}">
                <button type="button" onclick="this.parentNode.remove()">Sil</button>
            `;
            document.getElementById('camListesi').appendChild(div);
        }

        function fiyatlariYazdir() {
            const camlar = fiyatlariGetir();
            document.getElementById('camListesi').innerHTML = "";
            camlar.forEach(c => camSatiriEkle(c.isim, c.fiyat));
        }

        function fiyatlariKaydet(e) {
            e.preventDefault();
            const camSatirlari = document.querySelectorAll('#camListesi .cam-row');
            const fiyatlar = [];
            for(let row of camSatirlari) {
                const isim = row.querySelector('input[type="text"]').value.trim();
                const fiyat = parseFloat(row.querySelector('input[type="number"]').value);
                if(isim && !isNaN(fiyat)) {
                    fiyatlar.push({ isim, fiyat });
                }
            }
            localStorage.setItem('camFiyatlariV2', JSON.stringify(fiyatlar));
            alert("Fiyatlar başarıyla kaydedildi!");
        }

        fiyatlariYazdir();
    </script>
</body>
</html>
